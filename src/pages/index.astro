---
import Layout from '../layouts/Layout.astro';
import SupportPrompt from '../components/SupportPrompt.svelte';
import { CALCULATORS, REFERENCES } from '../data/tools.ts';

// Get featured tools (both calculators and references)
const featuredTools = [
	...CALCULATORS.filter(tool => tool.featured && tool.status === 'active'),
	...REFERENCES.filter(tool => tool.featured && tool.status === 'active')
].sort((a, b) => a.name.localeCompare(b.name));
---

<Layout title="EMT Calculator Tools">
	<div class="text-center mb-12">
		<h1 class="text-4xl font-bold mb-4 theme-accent-primary">EMT Calculator Tools</h1>
		<p class="text-xl theme-text-secondary max-w-2xl mx-auto mb-6">
			Essential calculators and reference tools for Emergency Medical Technicians,
			Advanced EMTs, and Paramedics.
		</p>
		<div class="flex justify-center gap-6">
			<a href="/calculators" class="text-sm theme-accent-primary hover:opacity-80 transition-opacity font-medium">
				Browse All Calculators →
			</a>
			<a href="/references" class="text-sm theme-accent-primary hover:opacity-80 transition-opacity font-medium">
				Quick References →
			</a>
			<a href="/about" class="text-sm theme-text-muted hover:theme-accent-primary transition-colors">
				About →
			</a>
		</div>
	</div>

	<!-- Support Prompt -->
	<SupportPrompt variant="subtle" client:load />

	<div class="text-center mb-8">
		<h2 class="text-2xl font-semibold theme-text-primary mb-2">Featured Tools</h2>
		<p class="theme-text-secondary">Quick access to the most essential calculators and references</p>
	</div>

	<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
		{featuredTools.map((tool) => (
			<a
				href={tool.url}
				class="theme-bg-secondary p-6 rounded-lg border theme-border-primary hover:border-blue-500 transition-colors group"
			>
				<h2 class="text-xl font-semibold mb-3 theme-accent-primary group-hover:text-blue-300">
					{tool.name}
				</h2>
				<p class="theme-text-secondary mb-4">
					{tool.description}
				</p>
				<div class="text-sm theme-text-muted">
					{tool.subcategory} - {tool.level}
				</div>
				{tool.category === 'reference' && (
					<div class="inline-block mt-2 px-2 py-1 text-xs rounded bg-blue-900/30 text-blue-300">
						Reference
					</div>
				)}
			</a>
		))}
	</div>
</Layout>
